@page "/"
@using TopDeck.Domain.Models
@inherits HomeBase
@attribute [AllowAnonymous]


<PageTitle>TOPDECK</PageTitle>


<div class="home-page">
    
    <AuthorizeView>
        <Authorized>    
                
            <LmButton style="position: absolute; top: 20px; right: 20px;" Href="/Account/Logout" ForceLoad>
                @Localizer.Localize("component.button.logout.text", "Log out")
            </LmButton>
                
        </Authorized>
        <NotAuthorized>
                
            <LmButton style="position: absolute; top: 20px; right: 20px;" Href="/Login">
                @Localizer.Localize("component.button.login.text", "Log in")
            </LmButton>
                
        </NotAuthorized>
    </AuthorizeView>
    
    <div class="home-page-content">
        
        <VerticalSpacer Value="20"/>
        
        <div class="deck-view-container">
            
            @if (Decks.Count <= 0 || Cards.Count <= 0)
            {
                <p>@Localizer.Localize("feedback.text.loading", "Loading...")</p>
            }
            else
            {
                foreach (Deck deck in Decks)
                {
                    Console.WriteLine("YO" + Cards.Count);
                    <DeckView Deck="deck" Cards="Cards.Where(c => deck.CardIds.Contains(c.Id)).ToList()"/>
                }
            }
            
        </div>

    </div>
    
</div>
